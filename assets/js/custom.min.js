function startPreloader(e){const t=document.querySelector("body");if(!e)return void t.classList.add("is-ready");e.style.display="flex";if(checkPreloader()){if(!t||!e)return;t.classList.add("is-loading"),t.classList.add("no-scroll"),t.classList.remove("is-ready"),createPreloader(e,2500),setTimeout((()=>{t.classList.remove("is-loading"),t.classList.remove("no-scroll"),t.classList.add("is-ready")}),2500),runAnimations()}else e.style.display="none",e.style.opacity="0",t.classList.remove("is-loading"),t.classList.remove("no-scroll"),t.classList.add("is-ready"),runAnimations()}function createPreloader(e,t){const o=e.querySelector(".progress"),n=e.querySelector(".loading-count"),s=2*Math.PI*70;o.style.strokeDasharray=s,o.style.strokeDashoffset=s,n.textContent="0";let r=0;const a=t,l=performance.now();requestAnimationFrame((function t(i){const c=i-l;let d;r=Math.min(c/a*100,100),n.textContent=Math.round(r),d=s-r/100*s,o.style.strokeDashoffset=d,r<100?requestAnimationFrame(t):setTimeout((()=>{e.style.opacity="0",setTimeout((()=>e.remove()),1e3)}),200)}))}function checkPreloader(){return!sessionStorage.getItem("siteVisited")&&(sessionStorage.setItem("siteVisited","true"),!0)}function startHorizontalScroll(e){if(!e||!e.length>2)return;gsap.registerPlugin(ScrollTrigger);let t=gsap.utils.toArray(e),o=document.querySelector(".prev"),n=document.querySelector(".next"),s=window.innerWidth*(t.length-1);ScrollTrigger.matchMedia({"(min-width: 960px)":function(){let e=gsap.to(t,{xPercent:-100*(t.length-1),ease:"none",scrollTrigger:{trigger:".authors-wrapper",start:"center center",pin:!0,scrub:1,end:()=>`+=${s}`,anticipatePin:1,pinSpacing:!0}}),r=0;function a(o){r=gsap.utils.clamp(0,t.length-1,o);let n=r/(t.length-1);gsap.to(e,{progress:n,duration:.6,ease:"power2.inOut"})}n.addEventListener("click",(()=>{a(r+1)})),o.addEventListener("click",(()=>{a(r-1)}))}})}function createCursor(e){if(!e)return;const t=document.querySelectorAll(".target");function o(t){gsap.to(e,{x:t.clientX-e.offsetWidth/2,y:t.clientY-e.offsetHeight/2,duration:.15,ease:"power3.out"})}function n(){gsap.to(e,{scale:.9,duration:.15,ease:"power2.out"})}function s(){gsap.to(e,{scale:1.1,duration:.2,ease:"power2.out",onComplete:()=>{gsap.to(e,{scale:1,duration:.2,ease:"elastic.out(1, 0.4)"})}})}gsap.set(e,{autoAlpha:0,scale:.5}),t.forEach((t=>{t.addEventListener("mouseenter",(()=>{gsap.to(e,{autoAlpha:1,scale:1,duration:.3,ease:"power3.out"}),t.addEventListener("mousemove",o),t.addEventListener("mousedown",n),t.addEventListener("mouseup",s)})),t.addEventListener("mouseleave",(()=>{gsap.to(e,{autoAlpha:0,scale:.5,duration:.3,ease:"power3.in"}),t.removeEventListener("mousemove",o),t.removeEventListener("mousedown",n),t.removeEventListener("mouseup",s)}))}))}function runAnimations(){const e=document.querySelectorAll(".animated");e.forEach((e=>{e.classList.contains("left")?(e.style.opacity=0,e.style.transform="translateX(-50%)"):e.classList.contains("right")?(e.style.opacity=0,e.style.transform="translateX(50%)"):e.classList.contains("center")?e.style.opacity=0:e.classList.contains("list")&&e.querySelectorAll("a").forEach((e=>{e.style.opacity=0,e.style.transform="translateY(-50px)"}))}));const t=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target;e.isIntersecting&&e.intersectionRatio>=.1?t.classList.contains("left")||t.classList.contains("right")?(t.style.transition="all 1.2s ease-out",t.style.opacity=1,t.style.transform="translateX(0)"):t.classList.contains("center")?(t.style.transition="opacity 1.2s ease-out",t.style.opacity=1):t.classList.contains("list")&&t.querySelectorAll("a").forEach(((e,t)=>{e.style.transition=`all 0.8s ${.2*t}s ease-out`,e.style.opacity=1,e.style.transform="translateY(0)"})):t.classList.contains("left")?(t.style.opacity=0,t.style.transform="translateX(-50%)"):t.classList.contains("right")?(t.style.opacity=0,t.style.transform="translateX(50%)"):t.classList.contains("center")?t.style.opacity=0:t.classList.contains("list")&&t.querySelectorAll("a").forEach((e=>{e.style.opacity=0,e.style.transform="translateY(-50px)"}))}))}),{root:null,rootMargin:"0px",threshold:[.1,.9]});e.forEach((e=>t.observe(e)))}function startGallery(e){const t=document.querySelectorAll(".gallery-item"),o=document.body,n=e.querySelector(".close-gallery"),s=e.querySelector(".gallery-swiper"),r={title:e.querySelector(".gc-title"),desc:e.querySelector(".gc-desc"),loc:e.querySelector(".gc-location"),lim:e.querySelector(".gc-limited")},a="is-open";let l=null;function i(e){e&&(r.title.textContent=`"${e.getAttribute("data-title")||""}"`,r.desc.innerHTML=e.getAttribute("data-content")||"",r.loc.innerHTML=e.getAttribute("data-location")||"",r.lim.textContent=e.getAttribute("data-limited")||"")}t.forEach((t=>{t.addEventListener("click",(n=>{n.preventDefault();const r=function(e){const t=s.querySelectorAll(".swiper-wrapper .swiper-slide:not(.swiper-slide-duplicate)");for(let o=0;o<t.length;o++)if((t[o].getAttribute("data-id")||"")===String(e))return o;return 0}(t.getAttribute("data-id"));o.classList.add("no-scroll"),e.classList.add(a),l||(s.swiper&&s.swiper.destroy(!0,!0),l=new Swiper(s,{slidesPerView:1,spaceBetween:0,centeredSlides:!1,loop:!0,speed:500,effect:"slide",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init(e){i(e.slides[e.activeIndex])},slideChange(e){i(e.slides[e.activeIndex])}},autoHeight:!0})),l.slideToLoop(r,0),requestAnimationFrame((()=>i(l.slides[l.activeIndex])))}))})),n.addEventListener("click",(t=>{t.preventDefault(),e.classList.remove(a),o.classList.remove("no-scroll")}))}window.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".custom-preloader")&&startPreloader(document.querySelector(".custom-preloader")),document.querySelector(".authors-wrapper")&&startHorizontalScroll(document.querySelectorAll(".author-container")),document.querySelector(".target")&&createCursor(document.querySelector(".custom-cursor")),document.querySelector(".gallery-wrapper")&&startGallery(document.querySelector(".gallery-wrapper"))})),function(){const e=document.querySelector(".burger"),t=document.querySelector(".nav-overlay"),o=document.body;if(!e||!t)return;const n=document.getElementById("catalog-button"),s=n?n.getAttribute("href"):null,r=n?n.getAttribute("download"):null,a=n?n.getAttribute("target"):null;function l(){const e=Array.from(document.querySelectorAll("[data-anchor]")),t=new Set,o=[];for(const n of e){const e=n.getAttribute("data-anchor")?.trim();e&&!t.has(e)&&(t.add(e),o.push({name:e,el:n}))}return o}function i(){e.classList.remove("is-active"),t.classList.remove("is-open"),o.classList.remove("no-scroll")}let c=[];function d(){c=l().map((e=>{const o=t.querySelector(`.nav-overlay__link[data-anchor="${CSS.escape(e.name)}"]`);return{...e,link:o}}));const e=window.scrollY+90;let o=null;for(const t of c){t.el.getBoundingClientRect().top+window.scrollY<=e&&(o=t)}t.querySelectorAll(".nav-overlay__link").forEach((e=>e.classList.remove("is-current"))),o&&o.link&&o.link.classList.add("is-current")}window.addEventListener("scroll",d,{passive:!0}),window.addEventListener("resize",d),function(){const n=l().map((e=>{const t=e.el.getAttribute("data-anchor-title")||e.name;return`<a href="#${encodeURIComponent(e.name)}" data-anchor="${e.name}" class="nav-overlay__link">${t}</a>`})).join(""),c=`\n      <div class="nav-overlay__static">\n        <a href="#open-gallery" class="button" data-action="open-gallery">See gallery</a>\n        ${s?`<a class="button" href="${s}" ${a?`target="${a}"`:""} ${r?`download="${r}"`:""} data-action="download-catalog">Download catalog</a>`:""}\n      </div>\n    `;t.innerHTML=`\n      <div class="nav-overlay__inner" data-overlay-inner>\n        ${n}\n        ${c}\n      </div>\n    `,e.onclick=n=>{n.preventDefault(),t.classList.contains("is-open")?i():(e.classList.add("is-active"),t.classList.add("is-open"),o.classList.add("no-scroll"))},t.addEventListener("click",(e=>{const t=e.target.closest("a");if(!t)return;const o=t.getAttribute("data-action");if("open-gallery"===o)return e.preventDefault(),i(),void setTimeout((()=>{const e=document.querySelector(".gallery-item");e&&e.click()}),350);if("download-catalog"===o)return void i();const n=t.getAttribute("data-anchor");if(n){e.preventDefault();const t=Array.from(document.querySelectorAll("[data-anchor]")).find((e=>e.getAttribute("data-anchor")===n));t&&(i(),setTimeout((()=>{!function(e){if(!e)return;const t=68;if(window.gsap&&window.ScrollToPlugin)gsap.to(window,{duration:.8,scrollTo:{y:e,offsetY:t,autoKill:!0},ease:"power2.out"});else{const o=e.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:o,behavior:"smooth"})}}(t)}),350))}})),d()}()}();